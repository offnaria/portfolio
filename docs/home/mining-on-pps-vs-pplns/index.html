<!DOCTYPE html>
<html lang="ja">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>offNaria&#39;s Homepage</title>
<meta name="description" content="offNariaのホームページ，ポートフォリオ">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://offnaria.github.io/portfolio/css/bootstrap.min.css">
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,300,700,400italic">
<link rel="stylesheet" href="https://offnaria.github.io/portfolio/css/font-awesome.min.css">
<link rel="stylesheet" href="https://offnaria.github.io/portfolio/css/owl.carousel.css">
<link rel="stylesheet" href="https://offnaria.github.io/portfolio/css/owl.theme.css">


  <link href="https://offnaria.github.io/portfolio/css/style.red.css" rel="stylesheet" id="theme-stylesheet">

 

  
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  


<link href="https://offnaria.github.io/portfolio/css/custom.css" rel="stylesheet">
<link rel="shortcut icon" href="https://offnaria.github.io/portfolio/img/favicon.png">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.5/dist/katex.min.css" integrity="sha384-L+Gq2Cso/Y2x8fX4wausgiZT8z0QPZz7OqPuz4YqAycQJyrJT9NRLpjFBD6zlOia" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.5/dist/katex.min.js" integrity="sha384-z64WtjpyrKFsxox9eI4SI8eM9toXdoYeWb5Qh+8PO+eG54Bv9BZqf9xNhlcLf/sA" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.5/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    renderMathInElement(document.body, {delimiters: [
      {left: "$$", right: "$$", display: true},
      {left: "$", right: "$", display: false}]
    });
  });
</script>
</head>
<body>
  <div id="all">
      <div class="container-fluid">
          <div class="row row-offcanvas row-offcanvas-left">
              <div id="sidebar" class="col-xs-6 col-sm-4 col-md-3 sidebar-offcanvas">
  <div class="sidebar-content">
    <h1 class="sidebar-heading"><a href="https://offnaria.github.io/portfolio/">offNaria&#39;s Homepage</a></h1>
    
      <p class="sidebar-p">東京工業大学で情報工学を学んでいます．</p>
    
      <p class="sidebar-p">並行コンピューティングやコンピュータアーキテクチャに興味があります．</p>
    
    <ul class="sidebar-menu">
      
        <li><a href="https://offnaria.github.io/portfolio/home/">Home</a></li>
      
        <li><a href="https://offnaria.github.io/portfolio/about/">About</a></li>
      
        <li><a href="https://offnaria.github.io/portfolio/contact/">Get in touch</a></li>
      
    </ul>
    <p class="social">
  
  
  
  <a href="https://twitter.com/YMD_Glasses" data-animate-hover="pulse" class="external twitter">
    <i class="fa fa-twitter"></i>
  </a>
  
  
  <a href="https://www.instagram.com/ymd_spectacles/" title="" class="external instagram">
    <i class="fa fa-instagram"></i>
  </a>
  
  
  
  
  
  <a href="https://github.com/offnaria" data-animate-hover="pulse" class="external">
    <i class="fa fa-github"></i>
  </a>
  
  
  
  <a href="https://www.youtube.com/channel/UCzWNynh1ChlHwoxE7Qmz_5A" data-animate-hover="pulse" class="external">
    <i class="fa fa-youtube"></i>
  </a>
  
  
</p>


    <div class="copyright">
      <p class="credit">
        
          &copy;2021 offNaria |
        
        Template by <a href="https://bootstrapious.com/free-templates" class="external">Bootstrapious.com</a>

&amp; ported to Hugo by <a href="https://github.com/kishaningithub">Kishan B</a>

      </p>
    </div>
  </div>
</div>

              
<div class="col-xs-12 col-sm-8 col-md-9 content-column white-background">
  <div class="small-navbar visible-xs">
  <button type="button" data-toggle="offcanvas" class="btn btn-ghost pull-left"> <i class="fa fa-align-left"> </i>Menu</button>
  <h1 class="small-navbar-heading"><a href="https://offnaria.github.io/portfolio/">offNaria&#39;s Homepage</a></h1>
</div>

  <div class="row">
    <div class="col-lg-8">
      <div class="content-column-content">
         <h1>暗号通貨採掘プールにおける2つの報酬支払い方式（PPS，PPLNS）</h1>
         <h4 id="経緯">経緯</h4>
<p>2014年頃，暗号通貨であるBitcoinやMonacoinの国内コミュニティで多少の知名度があった僕であるが，最近またマイニングをするようになったので，技術的なメモとしてPPSやPPLNSについて書こうと思う．ところで，当時獲得した通貨たちを今でも保持していたら…．</p>
<h4 id="そもそもマイニングについて">そもそもマイニングについて</h4>
<p>暗号通貨は取引情報などを格納した<strong>ブロック</strong>と呼ばれる構造体に対応するハッシュ値が，今まで承認されてきたブロックたちの系譜を辿っているかどうかを検証する<strong>マイニング</strong>と呼ばれる作業の報酬として獲得することができる．具体的には，以下の登場人物たちを用いて説明される．</p>
<p>第$n$ブロック期間中の取引一覧$t_n\in T$<br>
第$n$ブロックのハッシュ値$h_n\in H$<br>
${\rm nonce}$値$x\in X$<br>
第$n$ブロック$B_n=(t_n,h_{n-1},x)\in B\subset T\times H\times X$<br>
ハッシュ関数$h:B\rightarrow H$</p>
<p>ハッシュ関数は入力されたブロック＝取引一覧・前のブロックのハッシュ値・nonce値の組から1つの値を返す写像である．</p>
<p>ブロックチェーンに接続できるブロックのハッシュ値はハッシュ関数の終域から制限された集合$H^\prime\subset H$（例えば，ハッシュ値の下1桁が2である，など）に属している必要があり，$h_n\in H^\prime$となるようなnonce値を見つけるための総当たり計算こそがマイニングの実体である．そして，現在のブロックに対する適切なnonce値を最初に発見したノードがその報酬を獲得する．なお，$H^\prime$はマイニング時間の調整などのために自動的に更新され，ネットワーク全体の計算力が増大するのに伴って難易度が上昇していく．</p>
<p>しかしながら，ブロックチェーンが伸びるにつれて，取引情報の増加やハッシュ値の重複，より多くの計算資源を持ったノードの増加などに伴い，個人規模の計算力でブロック（のnonce値）を発見するのが困難になってきた．そこで，複数の個人が手分けして総当たり計算を行い，その貢献に応じて報酬を獲得する<strong>プールマイニング</strong>という方法が主流になってきた．</p>
<h4 id="プールマイニングの支払い方式">プールマイニングの支払い方式</h4>
<p>現在，多くのプールで採用されている報酬支払い方式は<strong>PPS</strong>と<strong>PPLNS</strong>の2種類であり，それぞれの特徴を確認していく．</p>
<h5 id="ppsの特徴">PPSの特徴</h5>
<p>PPSはPay-Per-Shareの略で，「貢献があるたびに支払う」というものである．</p>
<p>ところで，先ほどから登場している<strong>貢献</strong>（Share）とは，ハッシュ値の制限を緩和した集合$H^{\prime\prime}(H^\prime\subset H^{\prime\prime}\subset H)$に属するハッシュ値$h\in H^{\prime\prime}$を与えるようなnonce値を見つけることであり，その名の通りブロック発見のためにどれだけプールに貢献したかの指標となるものである．</p>
<p>閑話休題．PPSにおいて，プールはこれまでの統計や現在の採掘難易度と計算力の関係から，Share1つあたりの報酬を決め，採掘者たちがShareを提出しそれが有効であると認められるたびに，決定された報酬額を支払う．</p>
<p>この方針は採掘者たちにとってとてもありがたいものであるが，プールにとっては死活問題となる場合もある．プールはブロック発見の成否に関係なく，採掘者に報酬を支払わなければならない．そのため，運悪くブロックの発見に成功しないまま延々と報酬の支払いをし続けてしまうと，プールが破産してしまうことがある．また，Share1つあたりの報酬額が大きい期間だけ採掘を行い，それ以外の期間では行わないという採掘者がいると，なかなかブロックを発見できず，やはり上記のようになってしまうという攻撃手段が知られている．</p>
<p>そういうわけで，PPSは大きな計算力を誇り，安定した収入（採掘の報酬に限らず，広告やその他のサービスによるものも含む）が見込まれるプールが，比較的高めの手数料を設定して採用している傾向がある．</p>
<h5 id="pplnsの特徴">PPLNSの特徴</h5>
<p>PPLNSはPay-Per-Last N Sharesの略で，「ブロック発見直前N個のShareにおける貢献度合いに応じて支払う」というものである．</p>
<p>PPSがブロック発見の成否に関係なく報酬を支払うのに対し，こちらはプール（でマイニングをしている採掘者）がブロックを発見した場合のみに，その直前までにプールに提出されたN個のShareのうち何個を提出したかの割合で報酬額を決定し，支払いを行う．そのため，プールは運による大赤字を起こすことはなく，さらに採掘者はブロック発見時点までプールに貢献し続けなければならないという性質上，採掘者の流出も防止することができる．</p>
<p>そういうわけで，PPLNSは多くのプールで採用されており，比較的安い手数料で運用されている傾向がある．</p>
<h4 id="思うこと">思うこと</h4>
<p>CPU，GPU，ASIC，クラウドと時代が移り変わり，今再びGPUマイニングのブームが到来している．かつてはゲーマーが余った計算資源でマイニングを行い，コミュニティを形成して盛り上がるような世界であった．しかし，暗号通貨の資産的価値の上昇や参入者の増大により，マイニングや転売を目的としたGPUの買い占めが行われている．彼らを止めることはできないだろうが，せめて，ゲーマーや研究者をはじめとする，今も昔も計算力を必要としているような人たち（そこには僕も含めさせていただきたい）が適切な価格で手に入れることができるような情勢になることを願っている．</p>
         
      </div>
    </div>
  </div>
</div>

          </div>
      </div>
  </div>
  <script src="https://offnaria.github.io/portfolio/js/jquery.min.js"></script>
<script src="https://offnaria.github.io/portfolio/js/bootstrap.min.js"></script>
<script src="https://offnaria.github.io/portfolio/js/jquery.cookie.js"> </script>
<script src="https://offnaria.github.io/portfolio/js/ekko-lightbox.js"></script>
<script src="https://offnaria.github.io/portfolio/js/jquery.scrollTo.min.js"></script>
<script src="https://offnaria.github.io/portfolio/js/masonry.pkgd.min.js"></script>
<script src="https://offnaria.github.io/portfolio/js/imagesloaded.pkgd.min.js"></script>
<script src="https://offnaria.github.io/portfolio/js/owl.carousel.min.js"></script>
<script src="https://offnaria.github.io/portfolio/js/front.js"></script>



</body>
</html>
